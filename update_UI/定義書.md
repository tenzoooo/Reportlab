# update_UI フォルダ構成定義書（日本語）

本書は `update_UI` 以下の各フォルダおよび配下ファイルの役割を厳密に定義するものです。Next.js 16 / React 19 / Tailwind CSS v4 / Radix UI / Framer Motion / three.js を前提としています。パスのエイリアスは `@/` をルート（`update_UI`）に解決します（`components.json` 参照）。

## ルート直下
- `update_UI/.next/`
  - Next.js の開発/ビルド成果物。VCS には含めず、内容は自動生成・揮発的。
- `update_UI/node_modules/`
  - 依存パッケージのインストール先。VCS には含めない。
- `update_UI/package.json`
  - パッケージ定義・スクリプト・依存関係を管理。
- `update_UI/pnpm-lock.yaml`
  - 依存のロックファイル。厳密なバージョン固定に使用。
- `update_UI/tsconfig.json`
  - TypeScript 設定。`@/*` パスエイリアス、`jsx: react-jsx` などを定義。
- `update_UI/next.config.mjs`
  - Next.js のビルド/画像最適化等の設定。型エラー無視（開発）と `images.unoptimized` を有効化。
- `update_UI/postcss.config.mjs`
  - PostCSS/Tailwind v4 のプラグイン設定。
- `update_UI/next-env.d.ts`
  - Next.js が自動生成する型宣言（TypeScript 対応）。
- `update_UI/components.json`
  - shadcn/ui のスキーマ・スタイル・Tailwind 設定・パスエイリアス（`components`, `ui`, `lib`, `hooks`）を定義。
- `update_UI/STRUCTURE.md`
  - 英語の構成概要ドキュメント。
- `update_UI/定義書.md`
  - 本ドキュメント（日本語の厳密定義書）。

## app（アプリケーションルーティングとレイアウト）
- `update_UI/app/layout.tsx`
  - グローバル HTML シェル。Geist フォント取込、Vercel Analytics、`app/globals.css` の適用。
- `update_UI/app/globals.css`
  - Tailwind v4 ベースの全体 CSS。テーマトークン（HSL/OKLCH）、ユーティリティクラス（例: `.primary-button`, `.status-pill` 等）を定義。
- `update_UI/app/page.tsx`
  - ランディングページ。Hero/KPI/Features/Workflow/Pricing セクション。3D 背景（`components/3d/*`）は `dynamic(ssr:false)` でクライアントロード。Framer Motion によるアニメーション一式。

### 認証
- `update_UI/app/(auth)/login/page.tsx`
  - ログイン画面。メール/パスワードの基本検証とモック遷移（`/dashboard`）。
- `update_UI/app/(auth)/register/page.tsx`
  - 新規登録画面。強度検証・一致確認を含むバリデーション。完了後モック遷移。

### ダッシュボード（サイドバー・共通ヘッダ）
- `update_UI/app/dashboard/layout.tsx`
  - ダッシュボード用レイアウト。`@/components/ui/sidebar` によるサイドバー、ヘッダー（検索 `SearchDialog`／通知 `NotificationPanel`／ユーザーメニュー）を提供。`<SidebarProvider>` 配下に `children` を表示。
- `update_UI/app/dashboard/page.tsx`
  - 概要トップ。KPI カード、最近のレポート一覧、CTA カードを Framer Motion + shadcn `Card` で構成。

#### 通知
- `update_UI/app/dashboard/notifications/page.tsx`
  - 通知一覧。未読/既読フィルタ、既読化/全既読、削除などの UI。データはモック配列 `mockNotifications`。

#### プロフィール
- `update_UI/app/dashboard/profile/page.tsx`
  - プロフィール表示/編集、利用統計、最近のアクティビティ。編集モード切替に対応。

#### レポート
- `update_UI/app/dashboard/reports/page.tsx`
  - レポート一覧。フィルタタブ（すべて/完了/処理中）、検索、行アクション（プレビュー/ダウンロード/削除）。
- `update_UI/app/dashboard/reports/new/page.tsx`
  - 新規作成。PDF ドロップ/選択、タイトル入力、処理ステップ擬似進捗（`PROCESSING_STEPS`）→ 完了後 `/dashboard/reports/1` に遷移。
- `update_UI/app/dashboard/reports/[id]/page.tsx`
  - レポート詳細。ステータス（処理中/完了/エラー）、進捗バー、プレビュー、アップロード済ファイル一覧、ダウンロード/削除操作。
- `update_UI/app/dashboard/reports/loading.tsx`
  - レポート配下の Suspense ローディング占位（null レンダー）。

#### 設定
- `update_UI/app/dashboard/settings/page.tsx`
  - 設定タブ（プロフィール/サブスク/通知/セキュリティ）。サブスクはプラン比較・使用量・解約ダイアログ等（いずれも UI モック）。
- `update_UI/app/dashboard/settings/loading.tsx`
  - 設定配下の Suspense ローディング占位（null レンダー）。

### サポート/フィードバック
- `update_UI/app/feedback/page.tsx`
  - フィードバックフォーム。星評価、カテゴリ、テキスト送信。送信後の完了画面を含む。
- `update_UI/app/help/page.tsx`
  - ヘルプセンター。検索、クイックリンク（メール/チャット/FAQ）、よくある質問の折りたたみ。
- `update_UI/app/help/email/page.tsx`
  - メール問い合わせフォーム。送信完了画面を含む（送信処理はモック）。
- `update_UI/app/help/chat/page.tsx`
  - チャット問い合わせ。簡易な会話ログ、入力、クイック返信、ボット返信の疑似応答。
- `update_UI/app/help/faq/page.tsx`
  - FAQ 詳細。カテゴリフィルタ、検索、折りたたみ表示。
- `update_UI/app/help/loading.tsx`
  - ヘルプ配下の Suspense ローディング占位（null レンダー）。

## components（共有 UI・3D・ウィジェット）
- `update_UI/components/3d/floating-beaker.tsx`
  - three.js（`@react-three/fiber/drei`）でビーカー状メッシュを浮遊・回転表示する 3D ビジュアル。
- `update_UI/components/3d/data-visualization.tsx`
  - バーグラフ風メッシュ群を回転表示する 3D ビジュアル。
- `update_UI/components/notification-panel.tsx`
  - ヘッダーの通知ドロップダウン。未読カウント/既読処理/リンク遷移を提供（モックデータ）。
- `update_UI/components/search-dialog.tsx`
  - 検索ダイアログ。入力→モック結果のフィルタ表示、結果クリックで該当レポートへ遷移。
- `update_UI/components/theme-provider.tsx`
  - `next-themes` の ThemeProvider ラッパー。カラーテーマ切替のコンテキスト配布。

### components/ui（shadcn + Radix UI ラッパー群）
各ファイルは Tailwind と Radix UI を組み合わせた UI プリミティブです。基本的に視覚・アクセシビリティ仕様に準拠した薄いラッパーです。
- `accordion.tsx` 折りたたみ/アコーディオン。
- `alert-dialog.tsx` 破壊的操作の確認ダイアログ。
- `alert.tsx` インライン警告/情報メッセージ。
- `aspect-ratio.tsx` 固定アスペクト比コンテナ。
- `avatar.tsx` アバター/ユーザー画像。
- `badge.tsx` バッジ/ラベル。
- `breadcrumb.tsx` パンくずナビゲーション。
- `button-group.tsx` 複数ボタンのグルーピング。
- `button.tsx` ボタン本体（バリアント/サイズ対応）。
- `calendar.tsx` カレンダー（日付選択 UI ラッパー）。
- `card.tsx` カードコンテナ（ヘッダー/コンテンツ）。
- `carousel.tsx` カルーセル（Embla ラッパー）。
- `chart.tsx` グラフ（recharts ラッパー）。
- `checkbox.tsx` チェックボックス。
- `collapsible.tsx` 折りたたみコンテナ。
- `command.tsx` コマンドパレット（cmdk ラッパー）。
- `context-menu.tsx` コンテキストメニュー。
- `dialog.tsx` モーダルダイアログ。
- `drawer.tsx` ドロワー/シート（Vaul ベース）。
- `dropdown-menu.tsx` ドロップダウンメニュー。
- `empty.tsx` 空状態表示コンポーネント。
- `field.tsx` フィールド群の構造化（ラベル/説明/エラー/区切り等の統合ユーティリティ）。
- `form.tsx` react-hook-form の補助（FormField/Label/Message 等の連携）。
- `hover-card.tsx` ホバーカード。
- `input-group.tsx` 入力 + 接頭/接尾要素のグループ。
- `input-otp.tsx` OTP 入力。
- `input.tsx` テキスト入力。
- `item.tsx` リスト項目のスタイルヘルパー。
- `kbd.tsx` キーボードショートカット表示。
- `label.tsx` ラベル。
- `menubar.tsx` メニューバー。
- `navigation-menu.tsx` ナビゲーションメニュー。
- `pagination.tsx` ページネーション。
- `popover.tsx` ポップオーバー。
- `progress.tsx` 進捗バー。
- `radio-group.tsx` ラジオグループ。
- `resizable.tsx` リサイズ可能レイアウト。
- `scroll-area.tsx` スクロールエリア。
- `select.tsx` セレクトボックス。
- `separator.tsx` セパレータ（区切り）。
- `sheet.tsx` シート UI（モバイルドロワー用途）。
- `sidebar.tsx` サイドバーコンポーネント群（Provider/Trigger/Menu 等を包括）。
- `skeleton.tsx` スケルトンローダ。
- `slider.tsx` スライダー。
- `sonner.tsx` トースト（sonner）連携。
- `spinner.tsx` スピナー。
- `switch.tsx` トグルスイッチ。
- `table.tsx` テーブル。
- `tabs.tsx` タブ。
- `textarea.tsx` 複数行テキスト入力。
- `toast.tsx` トースト UI。
- `toaster.tsx` トーストマウント用コンポーネント。
- `toggle-group.tsx` トグルグループ。
- `toggle.tsx` トグルボタン。
- `tooltip.tsx` ツールチップ。
- `use-mobile.tsx` UI 名前空間での `useIsMobile` 再エクスポート（互換用）。
- `use-toast.ts` UI 名前空間のトーストフック（`hooks/use-toast.ts` と同等の用途）。

## hooks（カスタムフック）
- `update_UI/hooks/use-mobile.ts`
  - 画面幅に基づくモバイル判定（メディアクエリ）を返す。
- `update_UI/hooks/use-toast.ts`
  - トースト管理（追加/更新/閉じる）。`Toast`/`Toaster` と連携。

## lib（汎用ユーティリティ）
- `update_UI/lib/utils.ts`
  - `cn()`（`clsx` + `tailwind-merge`）でクラス結合。

## public（静的アセット）
- `update_UI/public/app-icon.png`
  - アプリアイコン（ヘッダー/ログイン等）。
- `update_UI/public/apple-icon.png`
  - Apple Touch Icon。
- `update_UI/public/icon.svg`
  - ベクターアイコン（`<link rel="icon">`）。
- `update_UI/public/icon-dark-32x32.png`
  - ダーク用 32px favicon。
- `update_UI/public/icon-light-32x32.png`
  - ライト用 32px favicon。
- `update_UI/public/placeholder*.{png,jpg,svg}`
  - プレースホルダー画像（ロゴ/ユーザー/汎用）。
- `update_UI/public/laboratory-experiment-report-preview.jpg`
  - レポート完成プレビュー用画像（詳細ページ表示）。

## styles（補助スタイル）
- `update_UI/styles/globals.css`
  - Tailwind v4 形式のテーマ/変数定義。現在の Tailwind 入力ポイントは `app/globals.css`（`components.json` の `tailwind.css`）のため、本ファイルはレガシー/補助用途として保持。

## 補足（その他）
- `update_UI/app/.DS_Store`, `update_UI/components/.DS_Store`
  - macOS のメタデータ。機能上の意味はなく、削除して問題なし。

## データ/状態に関する注意
- ダッシュボード通知、検索、レポート処理進捗などは現状すべてモックデータ/疑似タイマーで実装されています。実データ接続時は
  - 通知: API 経由でフェッチし、既読/削除はミューテーションを実行。
  - 検索: サーバ検索エンドポイントにクエリを投げ、結果をページネーション対応で表示。
  - レポート処理: ジョブキューのポーリングや WebSocket/SSE による進捗更新に置換。
- 認証は画面遷移のモックです。実装時はセッション管理（Cookie/JWT/Supabase 等）に差し替えてください。

以上。
